# ==============================================================================
# LOCAL DEVELOPMENT (Standard Docker)
# ==============================================================================
# Use this configuration when:
# - Developing on Linux/Windows, or macOS without OrbStack
# - Running Next.js with `pnpm dev` on your host machine
# - Backend services (PostgreSQL, Keycloak, MinIO) running in Docker
# - Accessing services via localhost with port mapping
#
# Setup:
#   1. Start backend services: docker compose up -d postgres keycloak minio
#   2. Copy this file: cp .env.docker-dev.example .env.local
#   3. Start dev server: pnpm dev
#   4. Access app at: http://localhost:3000
# ==============================================================================

# Database Configuration
# Use localhost with exposed port from Docker
DATABASE_URL=postgresql://kwiki:kwiki123@localhost:5432/k_wiki

# MinIO Configuration
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_BUCKET_NAME=k-wiki
MINIO_USE_SSL=false

# Keycloak Configuration
KEYCLOAK_CLIENT_ID=k-wiki-client
KEYCLOAK_CLIENT_SECRET=your-client-secret-from-keycloak-admin-console
KEYCLOAK_ISSUER=http://localhost:8080/realms/k-wiki

# Keycloak Admin API Configuration (for user management)
KEYCLOAK_ADMIN_URL=http://localhost:8080
KEYCLOAK_REALM=k-wiki
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123

# NextAuth Configuration
# Next.js runs on host machine port 3000
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=generate-with-openssl-rand-base64-32

# ==============================================================================
# REQUIRED DOCKER-COMPOSE.YML PORT MAPPINGS:
#
# Make sure your docker-compose.yml has these port mappings:
#
# services:
#   postgres:
#     ports:
#       - "5432:5432"  # PostgreSQL
#
#   keycloak:
#     ports:
#       - "8080:8080"  # Keycloak admin console
#
#   minio:
#     ports:
#       - "9000:9000"  # MinIO API
#       - "9001:9001"  # MinIO console
# ==============================================================================

# ==============================================================================
# NOTES:
#
# 1. Access Points:
#    - App: http://localhost:3000
#    - Keycloak Admin Console: http://localhost:8080
#    - MinIO Console: http://localhost:9001
#    - PostgreSQL: localhost:5432
#
# 2. Keycloak Client Setup:
#    - Go to: http://localhost:8080
#    - Login with admin/admin123 (or your KEYCLOAK_ADMIN credentials)
#    - Create realm: k-wiki
#    - Create client: k-wiki-client
#      - Client Protocol: openid-connect
#      - Access Type: confidential
#      - Valid Redirect URIs: http://localhost:3000/api/auth/callback/keycloak
#      - Web Origins: http://localhost:3000
#    - Copy Client Secret to KEYCLOAK_CLIENT_SECRET above
#
# 3. Generate NEXTAUTH_SECRET:
#    Run: openssl rand -base64 32
#
# 4. Difference from OrbStack:
#    - Uses localhost instead of *.orb.local domains
#    - Requires explicit port mappings in docker-compose.yml
#    - Works on all platforms (Linux, Windows, macOS)
# ==============================================================================
